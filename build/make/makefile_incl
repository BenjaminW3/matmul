# Linking
LINK	= $(CC) -fPIC
LIBS	= -lm


# Flags
COMMONFLAGS	= -O3 -DNDEBUG


# Program-specific
TARGET		= matmul
SOURCEDIR	= ../../src/
INCLUDES	= $(addprefix $(SOURCEDIR), config.h config_build.h malloc.h array.h mat_common.h matmul_seq.h matmul_seq_basic_opt.h matmul_seq_compl_opt.h matmul_seq_strassen.h matmul_par_strassen_omp.h matmul_par_openmp.h matmul_par_openacc.h matmul_par_blas_mkl.h)
OBJ			= malloc.c.o array.c.o mat_common.c.o main.c.o matmul_seq.c.o matmul_seq_basic_opt.c.o matmul_seq_compl_opt.c.o matmul_seq_strassen.c.o matmul_par_openmp.c.o matmul_par_strassen_omp.c.o matmul_par_openacc.c.o matmul_par_blas_mkl.c.o

TARGETCU	= matmulcu
OBJCU		= matmul_par_cuda.cu.o matmul_par_blas_cublas.cu.o
INCLUDESCU	= $(addprefix $(SOURCEDIR), matmul.cuh) #-I/usr/local/cuda/include

TARGETMPI	= matmulmpi
OBJMPI		= matmul_par_mpi_cannon.c.o matmul_par_mpi_dns.c.o
INCLUDESMPI	= $(addprefix $(SOURCEDIR), matmul_par_mpi_cannon.h matmul_par_mpi_dns.h)

TARGETMPICU	= matmulmpicu

TARGETPHI	= matmulphi
OBJPHI		= matmul_par_phi_off_openmp.c.o matmul_par_phi_off_blas_mkl.c.o
INCLUDESPHI	= $(addprefix $(SOURCEDIR), matmul_par_phi_off_openmp.h matmul_par_phi_off_blas_mkl.h)


# Libs
#-lcufft -lcuinj64 -lcurand -lcusparse -lnpp -lnvToolsExt
LIBSCU		= -L/usr/local/cuda/lib64 -lcudart -lcublas 


ADDITIONAL_COMPILER_OPTIONS	=


# Clear out all suffixes.
.SUFFIXES:
# List only those we use.
.SUFFIXES: .c .cpp .cu .o
